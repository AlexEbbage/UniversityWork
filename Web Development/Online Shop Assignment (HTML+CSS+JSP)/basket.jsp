<%@ page import="shop.Product" %><%@ page import="java.util.Map" %><jsp:useBean id='basket' scope='session' class='shop.Basket'/><jsp:useBean id='db' scope='session' class='shop.ShopDB'/><%    String empty = request.getParameter("emptyBasket");    if (empty != null)        basket.clearBasket();    String PIDRequest = request.getParameter("PID");    String quantityRequest = request.getParameter("quantity");    if ((PIDRequest != null) && (quantityRequest != null)) {        int quantity = Integer.parseInt(quantityRequest);        if (quantity >= 0) basket.updateItem(PIDRequest, quantity);    }%><html><body><%@ include file="header.jsp" %><div class="content" align="center">    <% Map<String, Integer> basketContents = basket.getItems();        if (basketContents.size() > 0) { %>    <table class="BasketTable">        <tr class="OrderHead">            <td>Img</td>            <td>Product</td>            <td>Artist</td>            <td>Price</td>            <td>&nbsp;</td>            <td>#</td>            <td>&nbsp;</td>            <td>Total</td>            <td>&nbsp;</td>        </tr>        <% for (String s : basketContents.keySet()) {            Product product = db.getProduct(s);            int quantity = basketContents.get(s); %>        <tr class="OrderData">            <td class="Image"><img src="<%= product.thumbnail %>"/></td>            <td class="Title"><%= product.title %>            </td>            <td class="Artist"><%= product.artist %>            </td>            <td class="Price"><%= product.getPrice(product.price) %>            </td>            <td class="Button"><a href='<%="basket.jsp?PID="+product.PID+"&quantity="+(quantity-1)%>'>-</a></td>            <td class="Quantity"><%= quantity %>            </td>            <td class="Button"><a href='<%="basket.jsp?PID="+product.PID+"&quantity="+(quantity+1)%>'>+</a></td>            <td class="Total"><%= product.getPrice(product.price * quantity) %>            </td>            <td class="Remove"><a href='<%="basket.jsp?PID="+product.PID+"&quantity=0"%>'>Remove</a></td>        </tr>        <% } %>    </table>    <p class="ProductTitle"> Order total is <%= basket.getTotalString() %>    </p>    <% if (basket.getTotal() > 0) { %>    <form action="order.jsp" method="post">        <input type="text" name="name" size="20">        <input type="submit" value="Place Order"/>    </form>    <form action="basket.jsp" method="get">        <input type="hidden" name="emptyBasket" value="yes">        <input type="submit" value="Empty Basket"/>    </form>    <% }    } else { %>    <p class="ProductTitle">Your basket is empty. Go back to the <a href="products.jsp">products</a> page and choose something to buy.</p>    <%}%></div></body></html>